the bug is with the free which free's the the variable "e" toooooooo early. 